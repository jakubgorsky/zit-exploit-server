<?php
// include 'conn.php';
include 'scripts/php/search.php';
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $uploadDir = 'images/'; // Create 'uploads' directory in the same folder as upload.php
    $uploadFile = $uploadDir . basename($_FILES['file']['name']);

    // Check if the file has been successfully uploaded
    if (move_uploaded_file($_FILES['file']['tmp_name'], $uploadFile)) {
        echo "File is valid, and was successfully uploaded.\n";
    } else {
        echo "Upload failed.\n";
    }
}
?>
<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>Upload - P4E - Your home for pictures</title>
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/navbar.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="./scripts/js/search.js"></script>
</head>
<body>
    <div id="main_grid">
        <div id="header" class="mainbg maintext">
            <a class="home" href="./home.php">Home</a>
            <a class="browse" href="./browse.php">Browse</a>
            <a class="contact" href="./info.php">Contact</a>
            <a class="active upload" href="./upload.php">Upload</a>
            
            <span id="searchbar"><form method="post"><input type="text" name="search" placeholder="Search for pictures..."/><input type="submit" hidden/></form></span>
        </div>
        <div id="content">
            <div class="result"></div>
            <h2>Upload JPG File</h2>
            <form action="upload.php" method="post" enctype="multipart/form-data">
                <label for="file">Select JPG file:</label>
                <input type="file" name="file" accept="all" required>
                <br>
                <button type="submit">Upload</button>
            </form>
        </div>
        <div id="footer" class="secondarybg">
            <left>Strona podatna na ataki stworzona jako projekt na zaliczenie kursu "Zarządzanie infrastrukturą teleinformatyczną".</left><right>Stronę stworzyli Jakub Górski nr. ind. 264035 oraz Piotr Nogalski nr. ind. 264416</right>
        </div>
    </div>
</body>
</html>